# This is a basic workflow to help you get started with Actions
name: Auto-publish

# Controls when the workflow will run
on:
  schedule:
    # At every 15th minute
    - cron: '*/15 * * * *'
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
      with:
        fetch-depth: '0'
    - name: Release version and push tag
      id: tag_version
      uses: anothrNick/github-tag-action@1.36.0
      env:
       GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
       WITH_V: true
    - name: Create a GitHub release
      uses: ncipollo/release-action@v1
      with:
        tag: ${{ steps.tag_version.outputs.new_tag }} 
        name: Release ${{ steps.tag_version.outputs.new_tag }}
        body: ${{ steps.tag_version.outputs.changelog }}
